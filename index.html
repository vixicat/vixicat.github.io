<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="mystyle.css">
</head>

<ul>
    <li><a class="active" href="./index.html">home</a></li>
    <li><a href="./projects.html">projects</a></li>
    <li><a href="./gaming.html">gaming</a></li>
    <li id="time" style="float:right; text-align: center; padding: 14px 16px; color: white;"></li>
    <li style="float:right"><a href="./about.html">about</a></li>
</ul>

<main>

    <div style="height:100px;"></div>

    <h1 id="text" style="font-size: 128px;">
        v_cat_
    </h1>

    <div style="height:25px;"></div>

    <h2 style="text-align: center;">
        welcome, stay a while ... or dont.
    </h2>

    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>
    <p>
        wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow wow 
    </p>

</main>

<script>

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // just a time grabber and updater every time the page is opened
    var currentTime = new Date()
    var hours = currentTime.getHours()
    var minutes = currentTime.getMinutes()
    if (minutes < 10){
    minutes = "0" + minutes
    }
    if(hours > 12){
        var visualhours = hours - 12
    } else {
        var visualhours = hours
    }
    document.getElementById("time").innerHTML = visualhours + ":" + minutes + " "
    if(hours > 11){
        document.getElementById("time").innerHTML += "PM"
    } else {
        document.getElementById("time").innerHTML += "AM"
    }

    // duration is equal to the number of cycles it runs, which as of right now takes abt 1.3 seconds each
    var duration = 100

    var textstorage2 = ['v', '_', 'c', 'a', 't', '_'];
    var glitchchars = ['$', '%', '&', '*', '@', '!', '+', '=', 'hiya', '#', '?', 'nya'];
    var output = "";
    var progress = 0;
    var text = "";
    const length = text.length;

    // takes the text apart and puts it back together with the glitch portion in it, then puts it onto the page
    function rebuild() {
        text = "";
        for (let i = 0; i < 6; i++) {
            text += textstorage2[i];
            document.getElementById("text").innerHTML = text;
        }
    }

    console.log("stop looking at my terrible code")
    rebuild();

    // gets a random character and position and then substitutes accordingly, then calls rebuild func
    function glitch() {
        var randgltich = Math.floor(Math.random() * glitchchars.length);
        var randplace = Math.floor(Math.random() * text.length);
        for (let i = 0; i < 6; i++) {
            if (i == randplace) {
                textstorage2[i] = glitchchars[randgltich];
                var swapped = true
            }    
        }
        console.log("randplace:", randplace)
        rebuild();
    }

    // sets it back to normal (there is technically a bug here with swapped = true instead of swapped == true but idc)
    function unglitch() {
        if (swapped = true) {
            textstorage2 = ['v', '_', 'c', 'a', 't', '_'];
            swapped = false;
            rebuild();
        }
    }

    // the run function which has to be set inside an async to have await commands
    async function glitchrun() {
        for (let i = 0; i < duration; i++) {
            await sleep(500)
            console.log(i)
            glitch();
            await sleep(125)
            unglitch();
            await sleep(750)
        }
    }

    // runs the glitch thingy
    glitchrun();

</script>
</html>